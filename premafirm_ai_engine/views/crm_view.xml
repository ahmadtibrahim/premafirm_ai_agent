<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_crm_lead_form_premafirm_ai" model="ir.ui.view">
        <field name="name">crm.lead.form.premafirm.ai</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button name="action_ai_calculate" type="object" string="AI Calculate" class="btn-primary"/>
            </xpath>

            <xpath expr="//sheet/notebook" position="inside">
                <page string="Load Info">
                    <group>
                        <group>
                            <field name="total_distance_km" readonly="1"/>
                            <field name="total_drive_hours" readonly="1"/>
                            <field name="total_pallets" readonly="1"/>
                            <field name="total_weight_lbs" readonly="1"/>
                        </group>
                        <group>
                            <field name="inside_delivery"/>
                            <field name="liftgate"/>
                            <field name="detention_requested"/>
                            <field name="assigned_vehicle_id"/>
                        </group>
                    </group>

                    <field name="dispatch_stop_ids">
                        <list editable="bottom">
                            <field name="sequence"/>
                            <field name="stop_type"/>
                            <field name="address"/>
                            <field name="service_type"/>
                            <field name="pallets"/>
                            <field name="weight_lbs"/>
                            <field name="pickup_window_start" optional="hide"/>
                            <field name="pickup_window_end" optional="hide"/>
                            <field name="delivery_window_start" optional="hide"/>
                            <field name="delivery_window_end" optional="hide"/>
                            <field name="special_instructions" optional="hide"/>
                            <field name="distance_km"/>
                            <field name="drive_hours"/>
                        </list>
                    </field>

                    <group>
                        <field name="estimated_cost" readonly="1"/>
                        <field name="suggested_rate" readonly="1"/>
                        <field name="ai_recommendation" readonly="1" nolabel="1"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
